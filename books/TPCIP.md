tcp/ip

・回線交換方式(old)
1:1 回線固定(電話)データ少ない。
>>「パケット交換方式」へ！(now)
ヘッダーをつけて送る。

cf)ペイロード>>データ本体のこと。

cf)パケットは多義語
広義>>ネットワークを流れるデータそのもの
狭義>>ネットワーク層で処理されるPDU、IPパケットとも。

cf)カプセル化　>> 送信の時ヘッダをつけてく。
非カプセル化 >> ヘッダをとってく！



・プロトコル
パケットの流し方の決まり！
【定義されてるもの】
物理的な仕様、送信相手、ヘッダがどこまででどんな情報か、信頼性(再送方法など)、セキュリティ(暗号化・相手の確認方法など)

階層ごとにプロトコルは定義されてる。



・TCP/IP 参照モデルと OSI参照モデル
現在の主流は TCP/IP参照モデル。
OSI参照モデルは細かく定義しすぎて、実際のモデルとは少し離れてしまった。
間をとった5段階くらいが使いやすい
(アプリ、トランスポート、ネットワーク、データリンク、物理)



・PDU protocol data unit
各階層で処理されるデータの単位のこと。
ネットワーク層のPDU=IPパケット



・IEEE >> ハードウェアより
IEFT >> ソフトウェアより



・定番プロトコル
各層に使われるプロトコルはほぼ定番化してる。
物理層: 有線 = イーサネット(IEEE802.3)
無線 = IEEE802.11
ネットワーク層: IP
トランスポート層: TCP・UDP
アプリ層: HTTP, HTTPS, QUIC,DNS
実際の通信では、NICやOSなどがプロトコルを勝手に選んでくれるので、ユーザーは意識しない。
cf)NIC
パケットをネットワークに流す時必ず通る。
物理層近辺。
cf)アクセスポイント
電波<=> パケットのやりとりをする機器。
wifi や。


・データリンク層とMACアドレス
データリンク層はローカルの物理的なネットワーク(LAN)を取り扱うためのもの？(物理的につながった機器同士)
L2スイッチ(ルーター内に含まれてる？)がMACアドレステーブルを管理し、転送処理を管理してくれる。


・ネットワーク層
ルーターのルーティングテーブルによって転送処理が管理される。
cf)L3スイッチ = ルーター+L2スイッチ


・トランスポート層
ポート番号で転送先アプリを判別。
ファイアウォール(旧式)はここ。


・AS番号
Autonomous System
ISPがそれぞれもつ、ネットワーク上で一意の番号。これに基づいてネットワーク上をパケットが駆け巡る。



・DMZ
LAN の一種で、L3スイッチ>FW>L2スイッチ> LB > L2スイッチ、の外部からの侵入を守るLANjテンプレート構成みたいな感じ。


・SDN software defined network
要は仮想？
コントロールプレーン>>制御
データプレーン>>パケットをやりとり

オーバーレイ形 >> vpn的にトンネル化(VXLAN)
(最近はもっぱらオーバーレイ)
ホップバイホップ形>>openflow 使われてない


・CDN
DNSサーバーみたいな。
DNSを使うwebは全部これ使ってんのか？
エッジサーバー(キャッシュするサーバー)、オリジンサーバー(元のサーバー)


・IEEE802.3 イーサネット　p50.
有線はもう全部これって感じ。(イーサネットII)
基本現場では、〇〇BASE-▷▷ って呼ばれる。
ツイストペアケーブル(BASE-T)と光ファイバーケーブル(BASE-SX/SR, BASE-LX/LR)大別される。

cf)全二重と半二重
半二重はCSMA/CD で再送制御必要。もうあまり使われてない。
自動で今は決定してくれる。



・IEEE802.11
無線LAN,wifi >> p67
半二重しかない。CSMA/CA で衝突を回避しながら通信する。



・イーサネットフレーム
イーサネットでカプセル化したパケット。
cf)FCS frame check sum
最後の4バイト、イーサネットフレームのエラー検知の全て
cf)MACアドレス
上位3bit >> ベンダー固有のID(OUI)
下位3bit >> ベンダーが割り当てたID(UAA)





